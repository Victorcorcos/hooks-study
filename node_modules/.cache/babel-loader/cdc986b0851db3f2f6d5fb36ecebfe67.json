{"ast":null,"code":"\"use strict\";\n\nvar fakeServer = require(\"./fake_server\");\n\nvar fakeTimers = require(\"./fake_timers\");\n\nfunction Server() {}\n\nServer.prototype = fakeServer;\nvar fakeServerWithClock = new Server();\n\nfakeServerWithClock.addRequest = function addRequest(xhr) {\n  if (xhr.async) {\n    if (typeof setTimeout.clock === \"object\") {\n      this.clock = setTimeout.clock;\n    } else {\n      this.clock = fakeTimers.useFakeTimers();\n      this.resetClock = true;\n    }\n\n    if (!this.longestTimeout) {\n      var clockSetTimeout = this.clock.setTimeout;\n      var clockSetInterval = this.clock.setInterval;\n      var server = this;\n\n      this.clock.setTimeout = function (fn, timeout) {\n        server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n        return clockSetTimeout.apply(this, arguments);\n      };\n\n      this.clock.setInterval = function (fn, timeout) {\n        server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n        return clockSetInterval.apply(this, arguments);\n      };\n    }\n  }\n\n  return fakeServer.addRequest.call(this, xhr);\n};\n\nfakeServerWithClock.respond = function respond() {\n  var returnVal = fakeServer.respond.apply(this, arguments);\n\n  if (this.clock) {\n    this.clock.tick(this.longestTimeout || 0);\n    this.longestTimeout = 0;\n\n    if (this.resetClock) {\n      this.clock.restore();\n      this.resetClock = false;\n    }\n  }\n\n  return returnVal;\n};\n\nfakeServerWithClock.restore = function restore() {\n  if (this.clock) {\n    this.clock.restore();\n  }\n\n  return fakeServer.restore.apply(this, arguments);\n};\n\nmodule.exports = fakeServerWithClock;","map":{"version":3,"names":["fakeServer","require","fakeTimers","Server","prototype","fakeServerWithClock","addRequest","xhr","async","setTimeout","clock","useFakeTimers","resetClock","longestTimeout","clockSetTimeout","clockSetInterval","setInterval","server","fn","timeout","Math","max","apply","arguments","call","respond","returnVal","tick","restore","module","exports"],"sources":["/Users/victorcosta/Desktop/repositories/react-project/hooks-study/node_modules/sinon/lib/sinon/util/fake_server_with_clock.js"],"sourcesContent":["\"use strict\";\n\nvar fakeServer = require(\"./fake_server\");\nvar fakeTimers = require(\"./fake_timers\");\n\nfunction Server() {}\nServer.prototype = fakeServer;\n\nvar fakeServerWithClock = new Server();\n\nfakeServerWithClock.addRequest = function addRequest(xhr) {\n    if (xhr.async) {\n        if (typeof setTimeout.clock === \"object\") {\n            this.clock = setTimeout.clock;\n        } else {\n            this.clock = fakeTimers.useFakeTimers();\n            this.resetClock = true;\n        }\n\n        if (!this.longestTimeout) {\n            var clockSetTimeout = this.clock.setTimeout;\n            var clockSetInterval = this.clock.setInterval;\n            var server = this;\n\n            this.clock.setTimeout = function (fn, timeout) {\n                server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                return clockSetTimeout.apply(this, arguments);\n            };\n\n            this.clock.setInterval = function (fn, timeout) {\n                server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                return clockSetInterval.apply(this, arguments);\n            };\n        }\n    }\n\n    return fakeServer.addRequest.call(this, xhr);\n};\n\nfakeServerWithClock.respond = function respond() {\n    var returnVal = fakeServer.respond.apply(this, arguments);\n\n    if (this.clock) {\n        this.clock.tick(this.longestTimeout || 0);\n        this.longestTimeout = 0;\n\n        if (this.resetClock) {\n            this.clock.restore();\n            this.resetClock = false;\n        }\n    }\n\n    return returnVal;\n};\n\nfakeServerWithClock.restore = function restore() {\n    if (this.clock) {\n        this.clock.restore();\n    }\n\n    return fakeServer.restore.apply(this, arguments);\n};\n\nmodule.exports = fakeServerWithClock;\n"],"mappings":"AAAA;;AAEA,IAAIA,UAAU,GAAGC,OAAO,CAAC,eAAD,CAAxB;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,eAAD,CAAxB;;AAEA,SAASE,MAAT,GAAkB,CAAE;;AACpBA,MAAM,CAACC,SAAP,GAAmBJ,UAAnB;AAEA,IAAIK,mBAAmB,GAAG,IAAIF,MAAJ,EAA1B;;AAEAE,mBAAmB,CAACC,UAApB,GAAiC,SAASA,UAAT,CAAoBC,GAApB,EAAyB;EACtD,IAAIA,GAAG,CAACC,KAAR,EAAe;IACX,IAAI,OAAOC,UAAU,CAACC,KAAlB,KAA4B,QAAhC,EAA0C;MACtC,KAAKA,KAAL,GAAaD,UAAU,CAACC,KAAxB;IACH,CAFD,MAEO;MACH,KAAKA,KAAL,GAAaR,UAAU,CAACS,aAAX,EAAb;MACA,KAAKC,UAAL,GAAkB,IAAlB;IACH;;IAED,IAAI,CAAC,KAAKC,cAAV,EAA0B;MACtB,IAAIC,eAAe,GAAG,KAAKJ,KAAL,CAAWD,UAAjC;MACA,IAAIM,gBAAgB,GAAG,KAAKL,KAAL,CAAWM,WAAlC;MACA,IAAIC,MAAM,GAAG,IAAb;;MAEA,KAAKP,KAAL,CAAWD,UAAX,GAAwB,UAAUS,EAAV,EAAcC,OAAd,EAAuB;QAC3CF,MAAM,CAACJ,cAAP,GAAwBO,IAAI,CAACC,GAAL,CAASF,OAAT,EAAkBF,MAAM,CAACJ,cAAP,IAAyB,CAA3C,CAAxB;QAEA,OAAOC,eAAe,CAACQ,KAAhB,CAAsB,IAAtB,EAA4BC,SAA5B,CAAP;MACH,CAJD;;MAMA,KAAKb,KAAL,CAAWM,WAAX,GAAyB,UAAUE,EAAV,EAAcC,OAAd,EAAuB;QAC5CF,MAAM,CAACJ,cAAP,GAAwBO,IAAI,CAACC,GAAL,CAASF,OAAT,EAAkBF,MAAM,CAACJ,cAAP,IAAyB,CAA3C,CAAxB;QAEA,OAAOE,gBAAgB,CAACO,KAAjB,CAAuB,IAAvB,EAA6BC,SAA7B,CAAP;MACH,CAJD;IAKH;EACJ;;EAED,OAAOvB,UAAU,CAACM,UAAX,CAAsBkB,IAAtB,CAA2B,IAA3B,EAAiCjB,GAAjC,CAAP;AACH,CA7BD;;AA+BAF,mBAAmB,CAACoB,OAApB,GAA8B,SAASA,OAAT,GAAmB;EAC7C,IAAIC,SAAS,GAAG1B,UAAU,CAACyB,OAAX,CAAmBH,KAAnB,CAAyB,IAAzB,EAA+BC,SAA/B,CAAhB;;EAEA,IAAI,KAAKb,KAAT,EAAgB;IACZ,KAAKA,KAAL,CAAWiB,IAAX,CAAgB,KAAKd,cAAL,IAAuB,CAAvC;IACA,KAAKA,cAAL,GAAsB,CAAtB;;IAEA,IAAI,KAAKD,UAAT,EAAqB;MACjB,KAAKF,KAAL,CAAWkB,OAAX;MACA,KAAKhB,UAAL,GAAkB,KAAlB;IACH;EACJ;;EAED,OAAOc,SAAP;AACH,CAdD;;AAgBArB,mBAAmB,CAACuB,OAApB,GAA8B,SAASA,OAAT,GAAmB;EAC7C,IAAI,KAAKlB,KAAT,EAAgB;IACZ,KAAKA,KAAL,CAAWkB,OAAX;EACH;;EAED,OAAO5B,UAAU,CAAC4B,OAAX,CAAmBN,KAAnB,CAAyB,IAAzB,EAA+BC,SAA/B,CAAP;AACH,CAND;;AAQAM,MAAM,CAACC,OAAP,GAAiBzB,mBAAjB"},"metadata":{},"sourceType":"script"}