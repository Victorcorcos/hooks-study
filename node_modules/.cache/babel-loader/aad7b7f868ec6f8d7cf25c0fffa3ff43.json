{"ast":null,"code":"\"use strict\";\n\nvar createBehavior = require(\"./behavior\").create;\n\nvar extend = require(\"./util/core/extend\");\n\nvar functionName = require(\"./util/core/function-name\");\n\nvar functionToString = require(\"./util/core/function-to-string\");\n\nvar getPropertyDescriptor = require(\"./util/core/get-property-descriptor\");\n\nvar sinonMatch = require(\"./match\");\n\nvar deepEqual = require(\"./util/core/deep-equal\").use(sinonMatch);\n\nvar spyCall = require(\"./call\");\n\nvar wrapMethod = require(\"./util/core/wrap-method\");\n\nvar sinonFormat = require(\"./util/core/format\");\n\nvar valueToString = require(\"./util/core/value-to-string\");\n\nvar push = Array.prototype.push;\nvar slice = Array.prototype.slice;\nvar callId = 0;\nvar ErrorConstructor = Error.prototype.constructor;\n\nfunction spy(object, property, types) {\n  var descriptor, methodDesc;\n\n  if (!property && typeof object === \"function\") {\n    return spy.create(object);\n  }\n\n  if (!object && !property) {\n    return spy.create(function () {});\n  }\n\n  if (!types) {\n    return wrapMethod(object, property, spy.create(object[property]));\n  }\n\n  descriptor = {};\n  methodDesc = getPropertyDescriptor(object, property);\n  types.forEach(function (type) {\n    descriptor[type] = spy.create(methodDesc[type]);\n  });\n  return wrapMethod(object, property, descriptor);\n}\n\nfunction incrementCallCount() {\n  this.called = true;\n  this.callCount += 1;\n  this.notCalled = false;\n  this.calledOnce = this.callCount === 1;\n  this.calledTwice = this.callCount === 2;\n  this.calledThrice = this.callCount === 3;\n}\n\nfunction createCallProperties() {\n  this.firstCall = this.getCall(0);\n  this.secondCall = this.getCall(1);\n  this.thirdCall = this.getCall(2);\n  this.lastCall = this.getCall(this.callCount - 1);\n}\n\nfunction createProxy(func, proxyLength) {\n  // Retain the function length:\n  var p;\n\n  if (proxyLength) {\n    // Do not change this to use an eval. Projects that depend on sinon block the use of eval.\n    // ref: https://github.com/sinonjs/sinon/issues/710\n    switch (proxyLength) {\n      /*eslint-disable no-unused-vars, max-len*/\n      case 1:\n        p = function proxy(a) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 2:\n        p = function proxy(a, b) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 3:\n        p = function proxy(a, b, c) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 4:\n        p = function proxy(a, b, c, d) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 5:\n        p = function proxy(a, b, c, d, e) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 6:\n        p = function proxy(a, b, c, d, e, f) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 7:\n        p = function proxy(a, b, c, d, e, f, g) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 8:\n        p = function proxy(a, b, c, d, e, f, g, h) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 9:\n        p = function proxy(a, b, c, d, e, f, g, h, i) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 10:\n        p = function proxy(a, b, c, d, e, f, g, h, i, j) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 11:\n        p = function proxy(a, b, c, d, e, f, g, h, i, j, k) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      case 12:\n        p = function proxy(a, b, c, d, e, f, g, h, i, j, k, l) {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      default:\n        p = function proxy() {\n          return p.invoke(func, this, slice.call(arguments));\n        };\n\n        break;\n\n      /*eslint-enable*/\n    }\n  } else {\n    p = function proxy() {\n      return p.invoke(func, this, slice.call(arguments));\n    };\n  }\n\n  p.isSinonProxy = true;\n  return p;\n}\n\nvar uuid = 0; // Public API\n\nvar spyApi = {\n  formatters: require(\"./spy-formatters\"),\n  reset: function () {\n    if (this.invoking) {\n      var err = new Error(\"Cannot reset Sinon function while invoking it. \" + \"Move the call to .reset outside of the callback.\");\n      err.name = \"InvalidResetException\";\n      throw err;\n    }\n\n    this.called = false;\n    this.notCalled = true;\n    this.calledOnce = false;\n    this.calledTwice = false;\n    this.calledThrice = false;\n    this.callCount = 0;\n    this.firstCall = null;\n    this.secondCall = null;\n    this.thirdCall = null;\n    this.lastCall = null;\n    this.args = [];\n    this.returnValues = [];\n    this.thisValues = [];\n    this.exceptions = [];\n    this.callIds = [];\n    this.errorsWithCallStack = [];\n\n    if (this.fakes) {\n      this.fakes.forEach(function (fake) {\n        if (fake.resetHistory) {\n          fake.resetHistory();\n        } else {\n          fake.reset();\n        }\n      });\n    }\n\n    return this;\n  },\n  create: function create(func, spyLength) {\n    var name;\n\n    if (typeof func !== \"function\") {\n      func = function () {};\n    } else {\n      name = functionName(func);\n    }\n\n    if (!spyLength) {\n      spyLength = func.length;\n    }\n\n    var proxy = createProxy(func, spyLength);\n    extend(proxy, spy);\n    delete proxy.create;\n    extend(proxy, func);\n    proxy.reset();\n    proxy.prototype = func.prototype;\n    proxy.displayName = name || \"spy\";\n    proxy.toString = functionToString;\n    proxy.instantiateFake = spy.create;\n    proxy.id = \"spy#\" + uuid++;\n    return proxy;\n  },\n  invoke: function invoke(func, thisValue, args) {\n    var matchings = this.matchingFakes(args);\n    var currentCallId = callId++;\n    var exception, returnValue;\n    incrementCallCount.call(this);\n    push.call(this.thisValues, thisValue);\n    push.call(this.args, args);\n    push.call(this.callIds, currentCallId);\n    matchings.forEach(function (matching) {\n      incrementCallCount.call(matching);\n      push.call(matching.thisValues, thisValue);\n      push.call(matching.args, args);\n      push.call(matching.callIds, currentCallId);\n    }); // Make call properties available from within the spied function:\n\n    createCallProperties.call(this);\n    matchings.forEach(function (matching) {\n      createCallProperties.call(matching);\n    });\n\n    try {\n      this.invoking = true;\n      returnValue = (this.func || func).apply(thisValue, args);\n      var thisCall = this.getCall(this.callCount - 1);\n\n      if (thisCall.calledWithNew() && typeof returnValue !== \"object\") {\n        returnValue = thisValue;\n      }\n    } catch (e) {\n      exception = e;\n    } finally {\n      delete this.invoking;\n    }\n\n    push.call(this.exceptions, exception);\n    push.call(this.returnValues, returnValue);\n    matchings.forEach(function (matching) {\n      push.call(matching.exceptions, exception);\n      push.call(matching.returnValues, returnValue);\n    });\n    var err = new ErrorConstructor(); // 1. Please do not get stack at this point. It may be so very slow, and not actually used\n    // 2. PhantomJS does not serialize the stack trace until the error has been thrown:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/Stack\n\n    try {\n      throw err;\n    } catch (e) {\n      /* empty */\n    }\n\n    push.call(this.errorsWithCallStack, err);\n    matchings.forEach(function (matching) {\n      push.call(matching.errorsWithCallStack, err);\n    }); // Make return value and exception available in the calls:\n\n    createCallProperties.call(this);\n\n    if (exception !== undefined) {\n      throw exception;\n    }\n\n    return returnValue;\n  },\n  named: function named(name) {\n    this.displayName = name;\n    return this;\n  },\n  getCall: function getCall(i) {\n    if (i < 0 || i >= this.callCount) {\n      return null;\n    }\n\n    return spyCall(this, this.thisValues[i], this.args[i], this.returnValues[i], this.exceptions[i], this.callIds[i], this.errorsWithCallStack[i]);\n  },\n  getCalls: function () {\n    var calls = [];\n    var i;\n\n    for (i = 0; i < this.callCount; i++) {\n      calls.push(this.getCall(i));\n    }\n\n    return calls;\n  },\n  calledBefore: function calledBefore(spyFn) {\n    if (!this.called) {\n      return false;\n    }\n\n    if (!spyFn.called) {\n      return true;\n    }\n\n    return this.callIds[0] < spyFn.callIds[spyFn.callIds.length - 1];\n  },\n  calledAfter: function calledAfter(spyFn) {\n    if (!this.called || !spyFn.called) {\n      return false;\n    }\n\n    return this.callIds[this.callCount - 1] > spyFn.callIds[0];\n  },\n  calledImmediatelyBefore: function calledImmediatelyBefore(spyFn) {\n    if (!this.called || !spyFn.called) {\n      return false;\n    }\n\n    return this.callIds[this.callCount - 1] === spyFn.callIds[spyFn.callCount - 1] - 1;\n  },\n  calledImmediatelyAfter: function calledImmediatelyAfter(spyFn) {\n    if (!this.called || !spyFn.called) {\n      return false;\n    }\n\n    return this.callIds[this.callCount - 1] === spyFn.callIds[spyFn.callCount - 1] + 1;\n  },\n  withArgs: function () {\n    var args = slice.call(arguments);\n\n    if (this.fakes) {\n      var matching = this.matchingFakes(args, true).pop();\n\n      if (matching) {\n        return matching;\n      }\n    } else {\n      this.fakes = [];\n    }\n\n    var original = this;\n    var fake = this.instantiateFake();\n    fake.matchingArguments = args;\n    fake.parent = this;\n    push.call(this.fakes, fake);\n\n    if (original.defaultBehavior && original.defaultBehavior.promiseLibrary) {\n      fake.defaultBehavior = fake.defaultBehavior || createBehavior(fake);\n      fake.defaultBehavior.promiseLibrary = original.defaultBehavior.promiseLibrary;\n    }\n\n    fake.withArgs = function () {\n      return original.withArgs.apply(original, arguments);\n    };\n\n    original.args.forEach(function (arg, i) {\n      if (!fake.matches(arg)) {\n        return;\n      }\n\n      incrementCallCount.call(fake);\n      push.call(fake.thisValues, original.thisValues[i]);\n      push.call(fake.args, arg);\n      push.call(fake.returnValues, original.returnValues[i]);\n      push.call(fake.exceptions, original.exceptions[i]);\n      push.call(fake.callIds, original.callIds[i]);\n    });\n    createCallProperties.call(fake);\n    return fake;\n  },\n  matchingFakes: function (args, strict) {\n    return (this.fakes || []).filter(function (fake) {\n      return fake.matches(args, strict);\n    });\n  },\n  matches: function (args, strict) {\n    var margs = this.matchingArguments;\n\n    if (margs.length <= args.length && deepEqual(margs, args.slice(0, margs.length))) {\n      return !strict || margs.length === args.length;\n    }\n\n    return undefined;\n  },\n  printf: function (format) {\n    var spyInstance = this;\n    var args = slice.call(arguments, 1);\n    var formatter;\n    return (format || \"\").replace(/%(.)/g, function (match, specifyer) {\n      formatter = spyApi.formatters[specifyer];\n\n      if (typeof formatter === \"function\") {\n        return formatter.call(null, spyInstance, args);\n      } else if (!isNaN(parseInt(specifyer, 10))) {\n        return sinonFormat(args[specifyer - 1]);\n      }\n\n      return \"%\" + specifyer;\n    });\n  }\n};\n\nfunction delegateToCalls(method, matchAny, actual, notCalled) {\n  spyApi[method] = function () {\n    if (!this.called) {\n      if (notCalled) {\n        return notCalled.apply(this, arguments);\n      }\n\n      return false;\n    }\n\n    var currentCall;\n    var matches = 0;\n\n    for (var i = 0, l = this.callCount; i < l; i += 1) {\n      currentCall = this.getCall(i);\n\n      if (currentCall[actual || method].apply(currentCall, arguments)) {\n        matches += 1;\n\n        if (matchAny) {\n          return true;\n        }\n      }\n    }\n\n    return matches === this.callCount;\n  };\n}\n\ndelegateToCalls(\"calledOn\", true);\ndelegateToCalls(\"alwaysCalledOn\", false, \"calledOn\");\ndelegateToCalls(\"calledWith\", true);\ndelegateToCalls(\"calledWithMatch\", true);\ndelegateToCalls(\"alwaysCalledWith\", false, \"calledWith\");\ndelegateToCalls(\"alwaysCalledWithMatch\", false, \"calledWithMatch\");\ndelegateToCalls(\"calledWithExactly\", true);\ndelegateToCalls(\"alwaysCalledWithExactly\", false, \"calledWithExactly\");\ndelegateToCalls(\"neverCalledWith\", false, \"notCalledWith\", function () {\n  return true;\n});\ndelegateToCalls(\"neverCalledWithMatch\", false, \"notCalledWithMatch\", function () {\n  return true;\n});\ndelegateToCalls(\"threw\", true);\ndelegateToCalls(\"alwaysThrew\", false, \"threw\");\ndelegateToCalls(\"returned\", true);\ndelegateToCalls(\"alwaysReturned\", false, \"returned\");\ndelegateToCalls(\"calledWithNew\", true);\ndelegateToCalls(\"alwaysCalledWithNew\", false, \"calledWithNew\");\ndelegateToCalls(\"callArg\", false, \"callArgWith\", function () {\n  throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n});\nspyApi.callArgWith = spyApi.callArg;\ndelegateToCalls(\"callArgOn\", false, \"callArgOnWith\", function () {\n  throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n});\nspyApi.callArgOnWith = spyApi.callArgOn;\ndelegateToCalls(\"throwArg\", false, \"throwArg\", function () {\n  throw new Error(this.toString() + \" cannot throw arg since it was not yet invoked.\");\n});\ndelegateToCalls(\"yield\", false, \"yield\", function () {\n  throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n}); // \"invokeCallback\" is an alias for \"yield\" since \"yield\" is invalid in strict mode.\n\nspyApi.invokeCallback = spyApi.yield;\ndelegateToCalls(\"yieldOn\", false, \"yieldOn\", function () {\n  throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n});\ndelegateToCalls(\"yieldTo\", false, \"yieldTo\", function (property) {\n  throw new Error(this.toString() + \" cannot yield to '\" + valueToString(property) + \"' since it was not yet invoked.\");\n});\ndelegateToCalls(\"yieldToOn\", false, \"yieldToOn\", function (property) {\n  throw new Error(this.toString() + \" cannot yield to '\" + valueToString(property) + \"' since it was not yet invoked.\");\n});\nextend(spy, spyApi);\nspy.spyCall = spyCall;\nmodule.exports = spy;","map":{"version":3,"names":["createBehavior","require","create","extend","functionName","functionToString","getPropertyDescriptor","sinonMatch","deepEqual","use","spyCall","wrapMethod","sinonFormat","valueToString","push","Array","prototype","slice","callId","ErrorConstructor","Error","constructor","spy","object","property","types","descriptor","methodDesc","forEach","type","incrementCallCount","called","callCount","notCalled","calledOnce","calledTwice","calledThrice","createCallProperties","firstCall","getCall","secondCall","thirdCall","lastCall","createProxy","func","proxyLength","p","proxy","a","invoke","call","arguments","b","c","d","e","f","g","h","i","j","k","l","isSinonProxy","uuid","spyApi","formatters","reset","invoking","err","name","args","returnValues","thisValues","exceptions","callIds","errorsWithCallStack","fakes","fake","resetHistory","spyLength","length","displayName","toString","instantiateFake","id","thisValue","matchings","matchingFakes","currentCallId","exception","returnValue","matching","apply","thisCall","calledWithNew","undefined","named","getCalls","calls","calledBefore","spyFn","calledAfter","calledImmediatelyBefore","calledImmediatelyAfter","withArgs","pop","original","matchingArguments","parent","defaultBehavior","promiseLibrary","arg","matches","strict","filter","margs","printf","format","spyInstance","formatter","replace","match","specifyer","isNaN","parseInt","delegateToCalls","method","matchAny","actual","currentCall","callArgWith","callArg","callArgOnWith","callArgOn","invokeCallback","yield","module","exports"],"sources":["/Users/victorcosta/Desktop/repositories/react-project/hooks-study/node_modules/sinon/lib/sinon/spy.js"],"sourcesContent":["\"use strict\";\n\nvar createBehavior = require(\"./behavior\").create;\nvar extend = require(\"./util/core/extend\");\nvar functionName = require(\"./util/core/function-name\");\nvar functionToString = require(\"./util/core/function-to-string\");\nvar getPropertyDescriptor = require(\"./util/core/get-property-descriptor\");\nvar sinonMatch = require(\"./match\");\nvar deepEqual = require(\"./util/core/deep-equal\").use(sinonMatch);\nvar spyCall = require(\"./call\");\nvar wrapMethod = require(\"./util/core/wrap-method\");\nvar sinonFormat = require(\"./util/core/format\");\nvar valueToString = require(\"./util/core/value-to-string\");\n\nvar push = Array.prototype.push;\nvar slice = Array.prototype.slice;\nvar callId = 0;\nvar ErrorConstructor = Error.prototype.constructor;\n\nfunction spy(object, property, types) {\n    var descriptor, methodDesc;\n\n    if (!property && typeof object === \"function\") {\n        return spy.create(object);\n    }\n\n    if (!object && !property) {\n        return spy.create(function () { });\n    }\n\n    if (!types) {\n        return wrapMethod(object, property, spy.create(object[property]));\n    }\n\n    descriptor = {};\n    methodDesc = getPropertyDescriptor(object, property);\n\n    types.forEach(function (type) {\n        descriptor[type] = spy.create(methodDesc[type]);\n    });\n\n    return wrapMethod(object, property, descriptor);\n}\n\nfunction incrementCallCount() {\n    this.called = true;\n    this.callCount += 1;\n    this.notCalled = false;\n    this.calledOnce = this.callCount === 1;\n    this.calledTwice = this.callCount === 2;\n    this.calledThrice = this.callCount === 3;\n}\n\nfunction createCallProperties() {\n    this.firstCall = this.getCall(0);\n    this.secondCall = this.getCall(1);\n    this.thirdCall = this.getCall(2);\n    this.lastCall = this.getCall(this.callCount - 1);\n}\n\nfunction createProxy(func, proxyLength) {\n    // Retain the function length:\n    var p;\n    if (proxyLength) {\n        // Do not change this to use an eval. Projects that depend on sinon block the use of eval.\n        // ref: https://github.com/sinonjs/sinon/issues/710\n        switch (proxyLength) {\n            /*eslint-disable no-unused-vars, max-len*/\n            case 1: p = function proxy(a) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 2: p = function proxy(a, b) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 3: p = function proxy(a, b, c) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 4: p = function proxy(a, b, c, d) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 5: p = function proxy(a, b, c, d, e) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 6: p = function proxy(a, b, c, d, e, f) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 7: p = function proxy(a, b, c, d, e, f, g) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 8: p = function proxy(a, b, c, d, e, f, g, h) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 9: p = function proxy(a, b, c, d, e, f, g, h, i) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 10: p = function proxy(a, b, c, d, e, f, g, h, i, j) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 11: p = function proxy(a, b, c, d, e, f, g, h, i, j, k) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            case 12: p = function proxy(a, b, c, d, e, f, g, h, i, j, k, l) { return p.invoke(func, this, slice.call(arguments)); }; break;\n            default: p = function proxy() { return p.invoke(func, this, slice.call(arguments)); }; break;\n            /*eslint-enable*/\n        }\n    } else {\n        p = function proxy() {\n            return p.invoke(func, this, slice.call(arguments));\n        };\n    }\n    p.isSinonProxy = true;\n    return p;\n}\n\nvar uuid = 0;\n\n// Public API\nvar spyApi = {\n    formatters: require(\"./spy-formatters\"),\n\n    reset: function () {\n        if (this.invoking) {\n            var err = new Error(\"Cannot reset Sinon function while invoking it. \" +\n                                \"Move the call to .reset outside of the callback.\");\n            err.name = \"InvalidResetException\";\n            throw err;\n        }\n\n        this.called = false;\n        this.notCalled = true;\n        this.calledOnce = false;\n        this.calledTwice = false;\n        this.calledThrice = false;\n        this.callCount = 0;\n        this.firstCall = null;\n        this.secondCall = null;\n        this.thirdCall = null;\n        this.lastCall = null;\n        this.args = [];\n        this.returnValues = [];\n        this.thisValues = [];\n        this.exceptions = [];\n        this.callIds = [];\n        this.errorsWithCallStack = [];\n        if (this.fakes) {\n            this.fakes.forEach(function (fake) {\n                if (fake.resetHistory) {\n                    fake.resetHistory();\n                } else {\n                    fake.reset();\n                }\n            });\n        }\n\n        return this;\n    },\n\n    create: function create(func, spyLength) {\n        var name;\n\n        if (typeof func !== \"function\") {\n            func = function () { };\n        } else {\n            name = functionName(func);\n        }\n\n        if (!spyLength) {\n            spyLength = func.length;\n        }\n\n        var proxy = createProxy(func, spyLength);\n\n        extend(proxy, spy);\n        delete proxy.create;\n        extend(proxy, func);\n\n        proxy.reset();\n        proxy.prototype = func.prototype;\n        proxy.displayName = name || \"spy\";\n        proxy.toString = functionToString;\n        proxy.instantiateFake = spy.create;\n        proxy.id = \"spy#\" + uuid++;\n\n        return proxy;\n    },\n\n    invoke: function invoke(func, thisValue, args) {\n        var matchings = this.matchingFakes(args);\n        var currentCallId = callId++;\n        var exception, returnValue;\n\n        incrementCallCount.call(this);\n        push.call(this.thisValues, thisValue);\n        push.call(this.args, args);\n        push.call(this.callIds, currentCallId);\n        matchings.forEach(function (matching) {\n            incrementCallCount.call(matching);\n            push.call(matching.thisValues, thisValue);\n            push.call(matching.args, args);\n            push.call(matching.callIds, currentCallId);\n        });\n\n        // Make call properties available from within the spied function:\n        createCallProperties.call(this);\n        matchings.forEach(function (matching) {\n            createCallProperties.call(matching);\n        });\n\n        try {\n            this.invoking = true;\n\n            returnValue = (this.func || func).apply(thisValue, args);\n\n            var thisCall = this.getCall(this.callCount - 1);\n            if (thisCall.calledWithNew() && typeof returnValue !== \"object\") {\n                returnValue = thisValue;\n            }\n        } catch (e) {\n            exception = e;\n        } finally {\n            delete this.invoking;\n        }\n\n        push.call(this.exceptions, exception);\n        push.call(this.returnValues, returnValue);\n        matchings.forEach(function (matching) {\n            push.call(matching.exceptions, exception);\n            push.call(matching.returnValues, returnValue);\n        });\n\n        var err = new ErrorConstructor();\n        // 1. Please do not get stack at this point. It may be so very slow, and not actually used\n        // 2. PhantomJS does not serialize the stack trace until the error has been thrown:\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/Stack\n        try {\n            throw err;\n        } catch (e) {/* empty */}\n        push.call(this.errorsWithCallStack, err);\n        matchings.forEach(function (matching) {\n            push.call(matching.errorsWithCallStack, err);\n        });\n\n        // Make return value and exception available in the calls:\n        createCallProperties.call(this);\n\n        if (exception !== undefined) {\n            throw exception;\n        }\n\n        return returnValue;\n    },\n\n    named: function named(name) {\n        this.displayName = name;\n        return this;\n    },\n\n    getCall: function getCall(i) {\n        if (i < 0 || i >= this.callCount) {\n            return null;\n        }\n\n        return spyCall(this, this.thisValues[i], this.args[i],\n                                this.returnValues[i], this.exceptions[i],\n                                this.callIds[i], this.errorsWithCallStack[i]);\n    },\n\n    getCalls: function () {\n        var calls = [];\n        var i;\n\n        for (i = 0; i < this.callCount; i++) {\n            calls.push(this.getCall(i));\n        }\n\n        return calls;\n    },\n\n    calledBefore: function calledBefore(spyFn) {\n        if (!this.called) {\n            return false;\n        }\n\n        if (!spyFn.called) {\n            return true;\n        }\n\n        return this.callIds[0] < spyFn.callIds[spyFn.callIds.length - 1];\n    },\n\n    calledAfter: function calledAfter(spyFn) {\n        if (!this.called || !spyFn.called) {\n            return false;\n        }\n\n        return this.callIds[this.callCount - 1] > spyFn.callIds[0];\n    },\n\n    calledImmediatelyBefore: function calledImmediatelyBefore(spyFn) {\n        if (!this.called || !spyFn.called) {\n            return false;\n        }\n\n        return this.callIds[this.callCount - 1] === spyFn.callIds[spyFn.callCount - 1] - 1;\n    },\n\n    calledImmediatelyAfter: function calledImmediatelyAfter(spyFn) {\n        if (!this.called || !spyFn.called) {\n            return false;\n        }\n\n        return this.callIds[this.callCount - 1] === spyFn.callIds[spyFn.callCount - 1] + 1;\n    },\n\n    withArgs: function () {\n        var args = slice.call(arguments);\n\n        if (this.fakes) {\n            var matching = this.matchingFakes(args, true).pop();\n\n            if (matching) {\n                return matching;\n            }\n        } else {\n            this.fakes = [];\n        }\n\n        var original = this;\n        var fake = this.instantiateFake();\n        fake.matchingArguments = args;\n        fake.parent = this;\n        push.call(this.fakes, fake);\n\n        if (original.defaultBehavior && original.defaultBehavior.promiseLibrary) {\n            fake.defaultBehavior = fake.defaultBehavior || createBehavior(fake);\n            fake.defaultBehavior.promiseLibrary = original.defaultBehavior.promiseLibrary;\n        }\n\n        fake.withArgs = function () {\n            return original.withArgs.apply(original, arguments);\n        };\n\n        original.args.forEach(function (arg, i) {\n            if (!fake.matches(arg)) {\n                return;\n            }\n\n            incrementCallCount.call(fake);\n            push.call(fake.thisValues, original.thisValues[i]);\n            push.call(fake.args, arg);\n            push.call(fake.returnValues, original.returnValues[i]);\n            push.call(fake.exceptions, original.exceptions[i]);\n            push.call(fake.callIds, original.callIds[i]);\n        });\n\n        createCallProperties.call(fake);\n\n        return fake;\n    },\n\n    matchingFakes: function (args, strict) {\n        return (this.fakes || []).filter(function (fake) {\n            return fake.matches(args, strict);\n        });\n    },\n\n    matches: function (args, strict) {\n        var margs = this.matchingArguments;\n\n        if (margs.length <= args.length &&\n            deepEqual(margs, args.slice(0, margs.length))) {\n            return !strict || margs.length === args.length;\n        }\n\n        return undefined;\n    },\n\n    printf: function (format) {\n        var spyInstance = this;\n        var args = slice.call(arguments, 1);\n        var formatter;\n\n        return (format || \"\").replace(/%(.)/g, function (match, specifyer) {\n            formatter = spyApi.formatters[specifyer];\n\n            if (typeof formatter === \"function\") {\n                return formatter.call(null, spyInstance, args);\n            } else if (!isNaN(parseInt(specifyer, 10))) {\n                return sinonFormat(args[specifyer - 1]);\n            }\n\n            return \"%\" + specifyer;\n        });\n    }\n};\n\nfunction delegateToCalls(method, matchAny, actual, notCalled) {\n    spyApi[method] = function () {\n        if (!this.called) {\n            if (notCalled) {\n                return notCalled.apply(this, arguments);\n            }\n            return false;\n        }\n\n        var currentCall;\n        var matches = 0;\n\n        for (var i = 0, l = this.callCount; i < l; i += 1) {\n            currentCall = this.getCall(i);\n\n            if (currentCall[actual || method].apply(currentCall, arguments)) {\n                matches += 1;\n\n                if (matchAny) {\n                    return true;\n                }\n            }\n        }\n\n        return matches === this.callCount;\n    };\n}\n\ndelegateToCalls(\"calledOn\", true);\ndelegateToCalls(\"alwaysCalledOn\", false, \"calledOn\");\ndelegateToCalls(\"calledWith\", true);\ndelegateToCalls(\"calledWithMatch\", true);\ndelegateToCalls(\"alwaysCalledWith\", false, \"calledWith\");\ndelegateToCalls(\"alwaysCalledWithMatch\", false, \"calledWithMatch\");\ndelegateToCalls(\"calledWithExactly\", true);\ndelegateToCalls(\"alwaysCalledWithExactly\", false, \"calledWithExactly\");\ndelegateToCalls(\"neverCalledWith\", false, \"notCalledWith\", function () {\n    return true;\n});\ndelegateToCalls(\"neverCalledWithMatch\", false, \"notCalledWithMatch\", function () {\n    return true;\n});\ndelegateToCalls(\"threw\", true);\ndelegateToCalls(\"alwaysThrew\", false, \"threw\");\ndelegateToCalls(\"returned\", true);\ndelegateToCalls(\"alwaysReturned\", false, \"returned\");\ndelegateToCalls(\"calledWithNew\", true);\ndelegateToCalls(\"alwaysCalledWithNew\", false, \"calledWithNew\");\ndelegateToCalls(\"callArg\", false, \"callArgWith\", function () {\n    throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n});\nspyApi.callArgWith = spyApi.callArg;\ndelegateToCalls(\"callArgOn\", false, \"callArgOnWith\", function () {\n    throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n});\nspyApi.callArgOnWith = spyApi.callArgOn;\ndelegateToCalls(\"throwArg\", false, \"throwArg\", function () {\n    throw new Error(this.toString() + \" cannot throw arg since it was not yet invoked.\");\n});\ndelegateToCalls(\"yield\", false, \"yield\", function () {\n    throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n});\n// \"invokeCallback\" is an alias for \"yield\" since \"yield\" is invalid in strict mode.\nspyApi.invokeCallback = spyApi.yield;\ndelegateToCalls(\"yieldOn\", false, \"yieldOn\", function () {\n    throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n});\ndelegateToCalls(\"yieldTo\", false, \"yieldTo\", function (property) {\n    throw new Error(this.toString() + \" cannot yield to '\" + valueToString(property) +\n        \"' since it was not yet invoked.\");\n});\ndelegateToCalls(\"yieldToOn\", false, \"yieldToOn\", function (property) {\n    throw new Error(this.toString() + \" cannot yield to '\" + valueToString(property) +\n        \"' since it was not yet invoked.\");\n});\n\nextend(spy, spyApi);\nspy.spyCall = spyCall;\nmodule.exports = spy;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}